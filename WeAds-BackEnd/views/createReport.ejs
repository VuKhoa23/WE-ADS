<%- include('./partials/header') %>

<div style="width: 500px;">
  <form>
    <div class="mb-3">
      <label class="form-label">Name</label>
      <input type="text" class="name form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Reason to report</label>
      <input type="text" class="reason form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Email address</label>
      <input type="email" class="email form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Phone number</label>
      <input type="text" class="phone form-control">
    </div>
    <div class="mb-3">
      <label class="form-label">Detail</label>
      <input type="text" class="detail form-control">
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script>
  $('.btn').click((e) => {
    e.preventDefault();  
    let name = $('.name').val();
    let reportType = $('.reason').val();
    let email = $('.email').val();
    let phone = $('.phone').val(); 
    let content = $('.detail').val();

    let data = {
      name: name, 
      reportType: reportType, 
      email: email, 
      phone: phone, 
      content: content
    }

    fetch('/api/weads-admin/report', {
      method: "POST",
      headers: {
        "Content-type": "application/json; charset=UTF-8"
      },
      body: JSON.stringify(data)
    })
    .then(() => {
      $('.name').val("");
      $('.reason').val("");
      $('.email').val("");
      $('.phone').val("");
      $('.detail').val("");
    })
  })
</script>